#!/usr/bin/env bash
if [ -f "/vagrant/box.json" ]; then
    database="$(jq -r '.startup.database' < /vagrant/box.json)"
    webserver="$(jq -r '.startup.webserver' < /vagrant/box.json)"
    processvm="$(jq -r '.startup.processvm' < /vagrant/box.json)"
    object_cache="$(jq -r '.startup.object_cache' < /vagrant/box.json)"

    if [ -z "$database" ]; then
        database=mysql
    fi

    if [ -z "$webserver" ];  then
        webserver=nginx
    fi

    if [ -z "$processvm" ]; then
        processvm=php7.0
    fi

    if [ -z "$object_cache" ]; then
        object_cache=redis
    fi
else
    database=mysql
    webserver=nginx
    processvm=php7.0
    object_cache=redis
fi

box set-database $database
box set-webserver $webserver
box set-processvm $processvm
box set-object-cache $object_cache
